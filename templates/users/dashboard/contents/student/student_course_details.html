{% extends "users/dashboard/student_dashboard_layout.html" %}
<!-- ------------------------- -->
{% block title %}Course Details{% endblock %}
<!-- ------------------------- -->
{% block content %}

<div class="max-w-5xl mx-auto space-y-10">
  <!-- ========================= -->
  <!--   COURSE HEADER CARD      -->
  <!-- ========================= -->
  <div class="bg-white py-8 rounded-xl">
    <div class="flex items-start gap-4">
      <!-- Decorative icon -->
      <div class="hidden md:block text-blue-600 text-4xl opacity-20">ðŸ“˜</div>
      <div>
        <h1 class="text-2xl font-bold text-gray-900">
          {{ course.code }} â€” {{ course.title }}
        </h1>

        <div class="flex items-center gap-4 mt-2">
          <p class="text-gray-600">{{ course.program.name }}</p>

          <p class="text-gray-500 text-sm">
            {{ course.semester.name }} â€¢ {{ course.semester.academic_year.name}}
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- ========================= -->
  <!--    COURSE RESOURCES       -->
  <!-- ========================= -->
  <div class="bg-white p-8 rounded-xl shadow">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-semibold">Course Resources</h3>
    </div>

    {% if resources %}
    <div class="space-y-5">
      {% for r in resources %}
      <div
        class="border-c rounded-lg p-5 bg-gray-50 hover:bg-gray-100 transition"
      >
        <div class="flex justify-between items-start">
          <div class="flex-1">
            <div
              class="w-full flex items-center justify-between text-lg font-semibold text-gray-800"
            >
              {{ r.title }} {% if r.external_link %}
              <a
                href="{{ r.external_link }}"
                target="_blank"
                class="inline-block text-blue-600 font-medium hover:underline text-sm"
              >
                ðŸ”— Open Link
              </a>
              {% endif %}
            </div>

            <div class="flex items-center gap-3 text-xs text-gray-500 mt-1">
              <span class="px-2 py-1 rounded bg-gray-200">
                {{ r.semester.name }}
              </span>

              <span> {{ r.created_at|date:"M d, Y" }} </span>

              <span>
                {% if r.lecturer %} By {{ r.lecturer.get_full_name }} {% else %}
                By Admin {% endif %}
              </span>
            </div>

            {% if r.summary %}
            <p class="mt-3 text-gray-700 leading-relaxed">{{ r.summary }}</p>
            {% endif %}

            <div class="mt-4 space-x-4">
              {% if r.file %}
              <a
                href="{{ r.file.url }}"
                download
                class="inline-block text-blue-600 font-medium hover:underline text-sm"
              >
                ðŸ“„ Download File
              </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    {% else %}
    <p class="text-gray-500 italic">No resources uploaded yet.</p>
    {% endif %}
  </div>

  <!-- ========================= -->
  <!--     LECTURER PROFILE      -->
  <!-- ========================= -->
  {% if lecturer %}
  <div class="p-6 rounded-xl flex items-center gap-6">
    <!-- Avatar circle -->
    <div
      class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 text-xl font-bold"
    >
      {{ lecturer.first_name|first }}{{ lecturer.last_name|first }}
    </div>

    <div>
      <h3 class="text-lg font-semibold text-gray-900">Lecturer</h3>

      <p class="text-gray-700 font-medium">{{ lecturer.get_full_name }}</p>

      <p class="text-gray-500 text-sm">{{ lecturer.email }}</p>
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}
